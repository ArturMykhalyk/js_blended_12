{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/modal.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["//Константи\n\nexport const STORAGE_KEYS = {\n  productsAPI: 'https://dummyjson.com/products',\n  page: 1,\n  per_Page: 12,\n  totalPage: 0,\n  category: 'All',\n};\n","// Функції для роботи з бекендом\nimport axios from 'axios';\nimport { STORAGE_KEYS } from './constants';\n\nasync function getCategories() {\n  const response = await axios.get(`${STORAGE_KEYS.productsAPI}/category-list`);\n  return response.data;\n}\n\nasync function getProducts(currentPage) {\n  const url = `${STORAGE_KEYS.productsAPI}?limit=${\n    STORAGE_KEYS.per_Page\n  }&skip=${(currentPage - 1) * 12}`;\n  const response = await axios.get(url);\n  return response.data;\n}\n\nasync function getProductsCategory(categorie, currentPage) {\n  const url = `${\n    STORAGE_KEYS.productsAPI\n  }/category/${categorie}?limit=12&skip=${(currentPage - 1) * 12}`;\n  const response = await axios.get(url);\n  return response.data;\n}\nasync function getProductsId(id) {\n  const url = `${STORAGE_KEYS.productsAPI}/${id}`;\n  const response = await axios.get(url);\n  return response.data;\n}\n\nexport { getCategories, getProducts, getProductsCategory, getProductsId };\n","//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n  categories: document.querySelector('.categories'),\n  products: document.querySelector('.products'),\n  loadMoreButton: document.querySelector('.moreButton'),\n  modal: document.querySelector('.modal'),\n  modalProduct: document.querySelector('.modal-product'),\n  closeModalBtn: document.querySelector('.modal__close-btn'),\n};\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport { refs } from './refs';\n// swiper\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nimport Swiper from 'swiper';\nimport { Navigation, Pagination, Autoplay, Zoom } from 'swiper/modules';\n\nfunction createCategories(categories) {\n  categories.unshift('All');\n  const markup = categories\n\n    .map(\n      categories => `<li class=\"categories__item\">\n          <button class=\"categories__btn\" type=\"button\">${categories}</button>\n        </li>`\n    )\n    .join('');\n\n  refs.categories.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createProducts(products) {\n  const markup = products\n\n    .map(\n      ({ id, title, brand, category, description, price, images }) => `\n      <li class=\"products__item\" data-id=\"${id}\">\n        <img class=\"products__image\"  src=\"${images[0]}\" alt=\"${description}\" />\n        <p class=\"products__title\">${title}</p>\n        <p class=\"products__brand\">\n          <span class=\"products__brand--bold\">Brand:${brand}</span>\n        </p>\n        <p class=\"products__category\">Category: ${category}</p>\n        <p class=\"products__price\">Price: ${price}$</p>\n      </li>`\n    )\n    .join('');\n\n  refs.products.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createProductModal({\n  title,\n  description,\n  price,\n  images,\n  returnPolicy,\n  shippingInformation,\n  tags,\n}) {\n  const tagsMarkup = tags\n    .map(tag => `<li class=\"modal-product__tag\">${tag}</li>`)\n    .join('');\n\n  const imagesSlides = images\n    .map(\n      image => `\n        <div class=\"swiper-slide\">\n          <div class=\"swiper-zoom-container\">\n          <img class=\"modal-product__img\" src=\"${image}\" alt=\"${description}\" />\n        </div>   \n        </div>`\n    )\n    .join('');\n  const markup = `\n        <div class=\"swiper modal-product__slider\">\n      <div class=\"swiper-wrapper\">\n        ${imagesSlides}\n      </div>\n      <div class=\"swiper-button-next\"></div>\n      <div class=\"swiper-button-prev\"></div>\n      <div class=\"swiper-pagination\"></div>\n    </div>\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tagsMarkup}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price} $</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n`;\n\n  refs.modalProduct.innerHTML = markup;\n\n  new Swiper('.modal-product__slider', {\n    modules: [Navigation, Pagination, Autoplay, Zoom],\n    loop: true,\n    zoom: {\n      maxRatio: 3,\n    },\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n    },\n    autoplay: {\n      delay: 5000,\n    },\n  });\n}\n\nfunction clearProducts() {\n  refs.products.innerHTML = '';\n}\nfunction showNotFound() {\n  document.querySelector('.not-found').classList.add('not-found--visible');\n}\n\n//  Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає\nfunction hideNotFound() {\n  document.querySelector('.not-found').classList.remove('not-found--visible');\n}\n//  Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\nfunction showLoader() {\n  document.querySelector('.loader').classList.add('visible');\n}\n//  Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає\nfunction hideLoader() {\n  document.querySelector('.loader').classList.remove('visible');\n}\nfunction showLoadMoreButton() {\n  document.querySelector('.moreButton').classList.add('visible');\n}\nfunction hideLoadMoreButton() {\n  document.querySelector('.moreButton').classList.remove('visible');\n}\nexport {\n  createCategories,\n  createProducts,\n  clearProducts,\n  showNotFound,\n  hideNotFound,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  createProductModal,\n};\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\nimport { refs } from './refs';\nfunction openModal() {\n  refs.modal.classList.add('modal--is-open');\n  document.addEventListener('keydown', closeModalOnEsc);\n\n  window.addEventListener('click', clickNoModal);\n\n  refs.closeModalBtn.addEventListener('click', closeModal);\n}\n\nfunction closeModal() {\n  refs.modal.classList.remove('modal--is-open');\n  document.removeEventListener('keydown', closeModalOnEsc);\n  window.removeEventListener('click', clickNoModal);\n}\n\nfunction closeModalOnEsc(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\nfunction clickNoModal(event) {\n  if (event.target === refs.modal) {\n    closeModal();\n  }\n}\nexport { openModal };\n","// Функції, які передаються колбеками в addEventListners\nimport iziToast from 'izitoast';\n\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { STORAGE_KEYS } from './constants';\nimport {\n  getProducts,\n  getProductsCategory,\n  getProductsId,\n} from './products-api';\nimport {\n  createProducts,\n  clearProducts,\n  showNotFound,\n  hideNotFound,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  createProductModal,\n} from './render-function';\nimport { openModal } from './modal';\nasync function handleCategoryClick(event) {\n  //перевірка чи клік саме по кнопці\n  if (!event.target.classList.contains('categories__btn')) return;\n  // прибрати всі активні кнопки\n  const buttons = document.querySelectorAll('.categories__btn');\n  buttons.forEach(btn => btn.classList.remove('categories__btn--active'));\n\n  STORAGE_KEYS.category = event.target.textContent;\n  STORAGE_KEYS.page = 1;\n\n  hideNotFound();\n\n  hideLoadMoreButton();\n\n  try {\n    let products;\n    if (STORAGE_KEYS.category === 'All') {\n      products = await getProducts(STORAGE_KEYS.page);\n    } else {\n      products = await getProductsCategory(\n        STORAGE_KEYS.category,\n        STORAGE_KEYS.page\n      );\n    }\n\n    if (products.products.length === 0) {\n      clearProducts();\n      showNotFound();\n      hideLoadMoreButton();\n      return;\n    }\n\n    STORAGE_KEYS.totalPage = products.total / STORAGE_KEYS.per_Page;\n    if (STORAGE_KEYS.totalPage > 1) {\n      showLoadMoreButton();\n      STORAGE_KEYS.page++;\n    }\n\n    clearProducts();\n\n    createProducts(products.products);\n    event.target.classList.toggle('categories__btn--active');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function handleMoreBtnClick(event) {\n  showLoader();\n  try {\n    let products;\n    if (STORAGE_KEYS.category === 'All') {\n      products = await getProducts(STORAGE_KEYS.page);\n    } else {\n      products = await getProductsCategory(\n        STORAGE_KEYS.category,\n        STORAGE_KEYS.page\n      );\n    }\n    hideLoader();\n    createProducts(products.products);\n\n    if (STORAGE_KEYS.totalPage <= STORAGE_KEYS.page) {\n      hideLoadMoreButton();\n\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n    }\n    STORAGE_KEYS.page++;\n  } catch (error) {\n    console.error('Error click button :', error);\n  }\n}\n\nasync function handleProductClick(event) {\n  const productItem = event.target.closest('.products__item');\n  if (!productItem) return;\n  const id = productItem.dataset.id;\n  openModal();\n  const product = await getProductsId(id);\n  console.log(product);\n  createProductModal(product);\n}\n\nexport { handleCategoryClick, handleProductClick, handleMoreBtnClick };\n","//Логіка сторінки Home\nimport { getCategories, getProducts } from './js/products-api';\nimport {\n  createCategories,\n  createProducts,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-function';\nimport {\n  handleCategoryClick,\n  handleProductClick,\n  handleMoreBtnClick,\n} from './js/handlers';\nimport { STORAGE_KEYS } from './js/constants';\nimport { refs } from './js/refs';\nshowLoader();\ngetCategories()\n  .then(categories => {\n    createCategories(categories);\n  })\n  .catch(error => console.log('categories', error));\n\ngetProducts(STORAGE_KEYS.page)\n  .then(products => {\n    hideLoader();\n    createProducts(products.products);\n    STORAGE_KEYS.totalPage = products.total / STORAGE_KEYS.per_Page;\n    if (STORAGE_KEYS.totalPage > 1) {\n      showLoadMoreButton();\n      STORAGE_KEYS.page++;\n    }\n  })\n  .catch(error => console.log('categories', error));\n\nrefs.categories.addEventListener('click', handleCategoryClick);\nrefs.products.addEventListener('click', handleProductClick);\nrefs.loadMoreButton.addEventListener('click', handleMoreBtnClick);\n"],"names":["STORAGE_KEYS","getCategories","axios","getProducts","currentPage","url","getProductsCategory","categorie","getProductsId","id","refs","createCategories","categories","markup","createProducts","products","title","brand","category","description","price","images","createProductModal","returnPolicy","shippingInformation","tags","tagsMarkup","tag","image","Swiper","Navigation","Pagination","Autoplay","Zoom","clearProducts","showNotFound","hideNotFound","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","openModal","closeModalOnEsc","clickNoModal","closeModal","event","handleCategoryClick","btn","error","handleMoreBtnClick","iziToast","handleProductClick","productItem","product"],"mappings":"8HAEO,MAAMA,EAAe,CAC1B,YAAa,iCACb,KAAM,EACN,SAAU,GACV,UAAW,EACX,SAAU,KACZ,ECJA,eAAeC,GAAgB,CAE7B,OADiB,MAAMC,EAAM,IAAI,GAAGF,EAAa,WAAW,gBAAgB,GAC5D,IAClB,CAEA,eAAeG,EAAYC,EAAa,CACtC,MAAMC,EAAM,GAAGL,EAAa,WAAW,UACrCA,EAAa,QACd,UAASI,EAAc,GAAK,EAAE,GAE/B,OADiB,MAAMF,EAAM,IAAIG,CAAG,GACpB,IAClB,CAEA,eAAeC,EAAoBC,EAAWH,EAAa,CACzD,MAAMC,EAAM,GACVL,EAAa,WACjB,aAAeO,CAAS,mBAAmBH,EAAc,GAAK,EAAE,GAE9D,OADiB,MAAMF,EAAM,IAAIG,CAAG,GACpB,IAClB,CACA,eAAeG,EAAcC,EAAI,CAC/B,MAAMJ,EAAM,GAAGL,EAAa,WAAW,IAAIS,CAAE,GAE7C,OADiB,MAAMP,EAAM,IAAIG,CAAG,GACpB,IAClB,CC1BO,MAAMK,EAAO,CAClB,WAAY,SAAS,cAAc,aAAa,EAChD,SAAU,SAAS,cAAc,WAAW,EAC5C,eAAgB,SAAS,cAAc,aAAa,EACpD,MAAO,SAAS,cAAc,QAAQ,EACtC,aAAc,SAAS,cAAc,gBAAgB,EACrD,cAAe,SAAS,cAAc,mBAAmB,CAC3D,ECEA,SAASC,EAAiBC,EAAY,CACpCA,EAAW,QAAQ,KAAK,EACxB,MAAMC,EAASD,EAEZ,IACCA,GAAc;AAAA,0DACsCA,CAAU;AAAA,cAE/D,EACA,KAAK,EAAE,EAEVF,EAAK,WAAW,mBAAmB,YAAaG,CAAM,CACxD,CAEA,SAASC,EAAeC,EAAU,CAChC,MAAMF,EAASE,EAEZ,IACC,CAAC,CAAE,GAAAN,EAAI,MAAAO,EAAO,MAAAC,EAAO,SAAAC,EAAU,YAAAC,EAAa,MAAAC,EAAO,OAAAC,CAAM,IAAO;AAAA,4CAC1BZ,CAAE;AAAA,6CACDY,EAAO,CAAC,CAAC,UAAUF,CAAW;AAAA,qCACtCH,CAAK;AAAA;AAAA,sDAEYC,CAAK;AAAA;AAAA,kDAETC,CAAQ;AAAA,4CACdE,CAAK;AAAA,YAE5C,EACA,KAAK,EAAE,EAEVV,EAAK,SAAS,mBAAmB,YAAaG,CAAM,CACtD,CAEA,SAASS,EAAmB,CAC1B,MAAAN,EACA,YAAAG,EACA,MAAAC,EACA,OAAAC,EACA,aAAAE,EACA,oBAAAC,EACA,KAAAC,CACF,EAAG,CACD,MAAMC,EAAaD,EAChB,IAAIE,GAAO,kCAAkCA,CAAG,OAAO,EACvD,KAAK,EAAE,EAYJd,EAAS;AAAA;AAAA;AAAA,UAVMQ,EAClB,IACCO,GAAS;AAAA;AAAA;AAAA,iDAGkCA,CAAK,UAAUT,CAAW;AAAA;AAAA,eAGtE,EACA,KAAK,EAAE,CAIU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAOoBH,CAAK;AAAA,0CACLU,CAAU;AAAA,gDACJP,CAAW;AAAA,kEACOK,CAAmB;AAAA,iEACpBD,CAAY;AAAA,iDAC5BH,CAAK;AAAA;AAAA;AAAA,EAKpDV,EAAK,aAAa,UAAYG,EAE9B,IAAIgB,EAAO,yBAA0B,CACnC,QAAS,CAACC,EAAYC,EAAYC,EAAUC,CAAI,EAChD,KAAM,GACN,KAAM,CACJ,SAAU,CACX,EACD,WAAY,CACV,OAAQ,sBACR,OAAQ,qBACT,EACD,WAAY,CACV,GAAI,qBACJ,UAAW,EACZ,EACD,SAAU,CACR,MAAO,GACR,CACL,CAAG,CACH,CAEA,SAASC,GAAgB,CACvBxB,EAAK,SAAS,UAAY,EAC5B,CACA,SAASyB,GAAe,CACtB,SAAS,cAAc,YAAY,EAAE,UAAU,IAAI,oBAAoB,CACzE,CAGA,SAASC,GAAe,CACtB,SAAS,cAAc,YAAY,EAAE,UAAU,OAAO,oBAAoB,CAC5E,CAEA,SAASC,GAAa,CACpB,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,SAAS,CAC3D,CAEA,SAASC,GAAa,CACpB,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,SAAS,CAC9D,CACA,SAASC,GAAqB,CAC5B,SAAS,cAAc,aAAa,EAAE,UAAU,IAAI,SAAS,CAC/D,CACA,SAASC,GAAqB,CAC5B,SAAS,cAAc,aAAa,EAAE,UAAU,OAAO,SAAS,CAClE,CCpIA,SAASC,GAAY,CACnB/B,EAAK,MAAM,UAAU,IAAI,gBAAgB,EACzC,SAAS,iBAAiB,UAAWgC,CAAe,EAEpD,OAAO,iBAAiB,QAASC,CAAY,EAE7CjC,EAAK,cAAc,iBAAiB,QAASkC,CAAU,CACzD,CAEA,SAASA,GAAa,CACpBlC,EAAK,MAAM,UAAU,OAAO,gBAAgB,EAC5C,SAAS,oBAAoB,UAAWgC,CAAe,EACvD,OAAO,oBAAoB,QAASC,CAAY,CAClD,CAEA,SAASD,EAAgBG,EAAO,CAC1BA,EAAM,MAAQ,UAChBD,GAEJ,CACA,SAASD,EAAaE,EAAO,CACvBA,EAAM,SAAWnC,EAAK,OACxBkC,GAEJ,CCFA,eAAeE,EAAoBD,EAAO,CAExC,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,iBAAiB,EAAG,OAEzC,SAAS,iBAAiB,kBAAkB,EACpD,QAAQE,GAAOA,EAAI,UAAU,OAAO,yBAAyB,CAAC,EAEtE/C,EAAa,SAAW6C,EAAM,OAAO,YACrC7C,EAAa,KAAO,EAEpBoC,IAEAI,IAEA,GAAI,CACF,IAAIzB,EAUJ,GATIf,EAAa,WAAa,MAC5Be,EAAW,MAAMZ,EAAYH,EAAa,IAAI,EAE9Ce,EAAW,MAAMT,EACfN,EAAa,SACbA,EAAa,IACrB,EAGQe,EAAS,SAAS,SAAW,EAAG,CAClCmB,IACAC,IACAK,IACA,MACD,CAEDxC,EAAa,UAAYe,EAAS,MAAQf,EAAa,SACnDA,EAAa,UAAY,IAC3BuC,IACAvC,EAAa,QAGfkC,IAEApB,EAAeC,EAAS,QAAQ,EAChC8B,EAAM,OAAO,UAAU,OAAO,yBAAyB,CACxD,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,eAAeC,EAAmBJ,EAAO,CACvCR,IACA,GAAI,CACF,IAAItB,EACAf,EAAa,WAAa,MAC5Be,EAAW,MAAMZ,EAAYH,EAAa,IAAI,EAE9Ce,EAAW,MAAMT,EACfN,EAAa,SACbA,EAAa,IACrB,EAEIsC,IACAxB,EAAeC,EAAS,QAAQ,EAE5Bf,EAAa,WAAaA,EAAa,OACzCwC,IAEAU,EAAS,KAAK,CACZ,QAAS,4DACT,SAAU,UAClB,CAAO,GAEHlD,EAAa,MACd,OAAQgD,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CAC5C,CACH,CAEA,eAAeG,EAAmBN,EAAO,CACvC,MAAMO,EAAcP,EAAM,OAAO,QAAQ,iBAAiB,EAC1D,GAAI,CAACO,EAAa,OAClB,MAAM3C,EAAK2C,EAAY,QAAQ,GAC/BX,IACA,MAAMY,EAAU,MAAM7C,EAAcC,CAAE,EACtC,QAAQ,IAAI4C,CAAO,EACnB/B,EAAmB+B,CAAO,CAC5B,CC3FAhB,IACApC,EAAe,EACZ,KAAKW,GAAc,CAClBD,EAAiBC,CAAU,CAC/B,CAAG,EACA,MAAMoC,GAAS,QAAQ,IAAI,aAAcA,CAAK,CAAC,EAElD7C,EAAYH,EAAa,IAAI,EAC1B,KAAKe,GAAY,CAChBuB,IACAxB,EAAeC,EAAS,QAAQ,EAChCf,EAAa,UAAYe,EAAS,MAAQf,EAAa,SACnDA,EAAa,UAAY,IAC3BuC,IACAvC,EAAa,OAEnB,CAAG,EACA,MAAMgD,GAAS,QAAQ,IAAI,aAAcA,CAAK,CAAC,EAElDtC,EAAK,WAAW,iBAAiB,QAASoC,CAAmB,EAC7DpC,EAAK,SAAS,iBAAiB,QAASyC,CAAkB,EAC1DzC,EAAK,eAAe,iBAAiB,QAASuC,CAAkB"}