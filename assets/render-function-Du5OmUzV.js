import{a as i,i as _,S as P,N as v,P as S,A as b,Z as w}from"./vendor-D41pUE73.js";const e={productsAPI:"https://dummyjson.com/products",per_Page:12,_idProduct:0,_idCart:[],_idWishlist:[],_category:"All",_page:0,_search:!1,_searchWord:"",_totalPage:1,setIdCart(t){this._idCart=t},addIdCart(t){this._idCart.push(t)},getIdCart(){return this._idCart},removeIdCart(t){this._idCart=this._idCart.filter(s=>s!==t)},setIdWishlist(t){this._idWishlist=t},addIdWishlist(t){this._idWishlist.push(t)},getIdWishlist(){return this._idWishlist},removeIdWishlist(t){this._idWishlist=this._idWishlist.filter(s=>s!==t)},hasIdWishlist(t){return this._idWishlist.includes(t)},hasIdCart(t){return this._idCart.includes(t)},setIdProduct(t){this._idProduct=t},getIdProduct(){return this._idProduct},setCategory(t){this._category=t,this._page=1},getCategory(){return this._category},setPage(t){this._page=t},getPage(){return this._page},incrementPage(){this._page++},setSearch(t,s=""){this._search=t,this._searchWord=s,this._page=1},isSearch(){return this._search},getSearchWord(){return this._searchWord},setTotalPage(t){this._totalPage=t},getTotalPage(){return this._totalPage},saveState(){const t={idCart:this._idCart,idWishlist:this._idWishlist};localStorage.setItem("cart",JSON.stringify(t))},restoreState(){const t=JSON.parse(localStorage.getItem("cart"));t&&(this._idCart=Array.isArray(t.idCart)?t.idCart:[],this._idWishlist=Array.isArray(t.idWishlist)?t.idWishlist:[])}};e.restoreState();async function O(){return(await i.get(`${e.productsAPI}/category-list`)).data}async function W(t){const s=`${e.productsAPI}?limit=${e.per_Page}&skip=${(t-1)*e.per_Page}`;return(await i.get(s)).data}async function I(t,s){const a=`${e.productsAPI}/category/${t}?limit=${e.per_Page}&skip=${(s-1)*e.per_Page}`;return(await i.get(a)).data}async function $(t){const s=`${e.productsAPI}/${t}`;return(await i.get(s)).data}async function A(t,s){const a=`${e.productsAPI}/search?limit=${e.per_Page}&q=${t}&skip=${(s-1)*e.per_Page}`;return(await i.get(a)).data}function L(){o.modal.classList.add("modal--is-open"),document.addEventListener("keydown",f),window.addEventListener("click",y),o.closeModalBtn.addEventListener("click",m)}function m(){o.modal.classList.remove("modal--is-open"),document.removeEventListener("keydown",f),window.removeEventListener("click",y)}function f(t){t.key==="Escape"&&m()}function y(t){t.target===o.modal&&m()}async function d({search:t=!1,loadMore:s=!1}={}){try{let a;if(t?a=await A(e.getSearchWord(),e.getPage()):e.getCategory()==="All"?a=await W(e.getPage()):a=await I(e.getCategory(),e.getPage()),console.log(a),s||k(),a.products.length===0){x(),g();return}B(),q(a.products),e.setTotalPage(a.total/e.per_Page),e.getPage()<=e.getTotalPage()?R():(g(),s&&_.info({message:"We're sorry, but you've reached the end of search results",position:"topRight"})),e.incrementPage()}catch(a){console.error("Loading products error:",a)}finally{T()}}async function z(t){t.target.classList.contains("categories__btn")&&(document.querySelectorAll(".categories__btn").forEach(s=>s.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active"),e.setCategory(t.target.textContent),g(),await d())}async function J(){E(),await d({search:e.isSearch(),loadMore:!0})}async function Z(t){const s=t.target.closest(".products__item");if(!s)return;L(),e.setIdProduct(s.dataset.id),e.hasIdWishlist(e.getIdProduct())?o.btnAddWishlistModal.textContent="Remove from Wishlist":o.btnAddWishlistModal.textContent="Add to Wishlist",e.hasIdCart(e.getIdProduct())?o.btnAddCartModal.textContent="Remove from cart":o.btnAddCartModal.textContent="Add to Cart";const a=await $(e.getIdProduct());M(a)}async function D(t){t.preventDefault();const s=o.searchInput.value.trim();if(!s)return o.searchForm.reset(),_.error({message:"The input string must not be empty.",position:"topRight"});e.setSearch(!0,s),await d({search:!0}),o.searchForm.reset()}async function G(){e.setSearch(!1),o.searchInput.value="",await d()}function K(t){t.target.textContent.toLowerCase().trim()==="add to cart"?(e.addIdCart(e.getIdProduct()),e.saveState(),t.target.textContent="Remove from cart"):(t.target.textContent="Add to Cart",e.removeIdCart(e._idProduct),e.saveState()),j()}function Y(t){t.target.textContent.toLowerCase().trim()==="add to wishlist"?(e.addIdWishlist(e.getIdProduct()),e.saveState(),t.target.textContent="Remove from Wishlist"):(t.target.textContent="Add to Wishlist",e.removeIdWishlist(e._idProduct),e.saveState()),N()}const o={categories:document.querySelector(".categories"),products:document.querySelector(".products"),loadMoreButton:document.querySelector(".moreButton"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),closeModalBtn:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),searchClear:document.querySelector(".search-form__btn-clear"),btnAddCartModal:document.querySelector(".modal-product__btn--cart"),btnAddWishlistModal:document.querySelector(".modal-product__btn--wishlist"),navCountCart:document.querySelector("[data-cart-count]"),navCountWishlist:document.querySelector("[data-wishlist-count]")};function Q(t){t.unshift("All");const s=t.map(a=>`<li class="categories__item">
          <button class="categories__btn" type="button">${a}</button>
        </li>`).join("");o.categories.insertAdjacentHTML("beforeend",s)}function q(t){const s=t.map(({id:a,title:r,brand:n,category:c,description:l,price:u,images:p})=>`
      <li class="products__item" data-id="${a}">
        <img class="products__image"  src="${p[0]}" alt="${l}" />
        <p class="products__title">${r}</p>
        <p class="products__brand">
          <span class="products__brand--bold">Brand:${n||" no brand"}</span>
        </p>
        <p class="products__category">Category: ${c}</p>
        <p class="products__price">Price: ${u}$</p>
      </li>`).join("");o.products.insertAdjacentHTML("beforeend",s)}function M({title:t,description:s,price:a,images:r,returnPolicy:n,shippingInformation:c,tags:l}){const u=l.map(h=>`<li class="modal-product__tag">${h}</li>`).join(""),p=r.length>1,C=`
        <div class="swiper modal-product__slider">
      <div class="swiper-wrapper">
        ${r.map(h=>`
        <div class="swiper-slide">
          <div class="swiper-zoom-container">
          <img class="modal-product__img" src="${h}" alt="${s}" />
        </div>   
        </div>`).join("")}
      </div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
      <div class="modal-product__content">
        <p class="modal-product__title">${t}</p>
        <ul class="modal-product__tags">${u}</ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping:${c}</p>
        <p class="modal-product__return-policy">Return Policy: ${n}</p>
        <p class="modal-product__price">Price: ${a} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
`;o.modalProduct.innerHTML=C,new P(".modal-product__slider",{modules:[v,S,b,w],loop:p,zoom:{maxRatio:3},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:5e3}})}function k(){o.products.innerHTML=""}function x(){document.querySelector(".not-found").classList.add("not-found--visible")}function B(){document.querySelector(".not-found").classList.remove("not-found--visible")}function E(){document.querySelector(".loader").classList.add("visible")}function T(){document.querySelector(".loader").classList.remove("visible")}function R(){document.querySelector(".moreButton").classList.add("visible")}function g(){document.querySelector(".moreButton").classList.remove("visible")}function j(){o.navCountCart.textContent=e._idCart.length}function N(){o.navCountWishlist.textContent=e._idWishlist.length}export{e as S,N as a,x as b,q as c,T as d,Z as e,K as f,$ as g,B as h,Y as i,z as j,J as k,D as l,G as m,O as n,Q as o,W as p,R as q,o as r,E as s,j as u};
//# sourceMappingURL=render-function-Du5OmUzV.js.map
